#!/bin/bash

WAL_COLORS="$HOME/.cache/wal/colors.json"
GHOSTTY_COLORS="$HOME/.config/ghostty/pywal-colors.conf"

# Extract colors
background=$(jq -r '.special.background' "$WAL_COLORS")
foreground=$(jq -r '.special.foreground' "$WAL_COLORS")
cursor=$(jq -r '.special.cursor' "$WAL_COLORS")
readarray -t colors < <(jq -r '.colors[]' "$WAL_COLORS") # Write Ghostty config

cat >"$GHOSTTY_COLORS" <<EOF
# Generated by pywal integration
background = "$background"
foreground = "$foreground"
cursor-color = "$cursor"

palette = 0=${colors[0]}
palette = 1=${colors[1]}
palette = 2=${colors[2]}
palette = 3=${colors[3]}
palette = 4=${colors[4]}
palette = 5=${colors[5]}
palette = 6=${colors[6]}
palette = 7=${colors[7]}
palette = 8=${colors[8]}
palette = 9=${colors[9]}
palette  = 10=${colors[10]}
palette  = 11=${colors[11]}
palette  = 12=${colors[12]}
palette  = 13=${colors[13]}
palette  = 14=${colors[14]}
palette  = 15=${colors[15]}
EOF
